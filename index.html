<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta property="og:url" content="https://fso13.github.io/note-boardgames/"/>
    <meta property="og:image" content="https://sun9-63.userapi.com/impf/c830708/v830708043/17e4dd/Ct4z70FTyNg.jpg?size=550x550&quality=96&sign=21403d15f3f6ce7b9583f03ac15e4727&type=album"/>
    <meta property="og:image:alt" content="Бардовский университет"/>
    <meta property="og:image:width" content="550"/>
    <meta property="og:image:height" content="550"/>
    <meta property="og:site_name" content="Бардовский университет"/>
    <meta property="og:type" content="article"/>
    <meta property="og:title" content="Бардовский университет"/>
    <meta property="og:description" content="Бардовский университет"/>

    <script>
        if (window.location.hash) {
            var id = window.location.hash.replace(/^\D+/g, '');
            console.log("'" + window.location.hash + "'");
            console.log("fsfdsfsdf");
            var note = notes.filter(n => n.id == id)[0];
            var url = note.files[0];
            var desc = note.title + "\n" + note.content;
            document.querySelector('meta[property="og:image"]').setAttribute("content", url);
            document.querySelector('meta[property="og:url"]').setAttribute("content", window.location);
            document.querySelector('meta[property="og:description"]').setAttribute("content", desc);
            document.querySelector('meta[property="og:title"]').setAttribute("content", desc);
            document.querySelector('meta[property="og:site_name"]').setAttribute("content", desc);
            document.querySelector('meta[property="og:image:alt"]').setAttribute("content", desc);
        }
    </script>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.12/dist/css/bootstrap-select.min.css">
    <link crossorigin="anonymous" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script crossorigin="anonymous" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
            src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script crossorigin="anonymous" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script crossorigin="anonymous" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
            src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.13.12/dist/js/bootstrap-select.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/gitbrent/bootstrap4-toggle@3.6.1/js/bootstrap4-toggle.min.js"></script>
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
            crossorigin="anonymous"></script>

    <script src="js/note.js"></script>
    <style>

        .grid {
            background-color: #ffffff;
            display: grid;
            grid-gap: 10px;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            grid-auto-rows: 10px;
        }

        /* Non-grid specific CSS */
        body {
            margin: 10px;
            background-color: #ffffff;
            font-family: 'Open Sans Condensed', sans-serif;
            font-size: 1.15em;
            text-rendering: optimizeLegibility;
            -webkit-font-smoothing: antialiased;
        }

        .item {
            background-color: #ffffff;
        }

        .content {
            border: 1px solid;
            border-radius: 8px;
            width: 280px;
            padding: 10px;
            margin: 5px;
            box-shadow: 3px 3px 3px darkgrey;
            background-color: #ffffff;
        }
    </style>

</head>

<body translate="no">
<script>
    if (window.location.hash) {
        var id = window.location.hash.replace(/^\D+/g, '');
        console.log("'" + window.location.hash + "'");
        console.log("fsfdsfsdf");
        var note = notes.filter(n => n.id == id)[0];
        var url = note.files[0];
        var desc = note.content;
        ``
        document.querySelector('meta[property="og:image"]').setAttribute("content", url);
        document.querySelector('meta[property="og:url"]').setAttribute("content", window.location);
        document.querySelector('meta[property="og:description"]').setAttribute("content", desc);
        document.querySelector('meta[property="og:title"]').setAttribute("content", note.title + "\n" + desc);
        document.querySelector('meta[property="og:site_name"]').setAttribute("content", note.title + "\n" + desc);
    }
</script>
<div class="container-fluid">
    <div class="row flex-nowrap">
        <div class="col-auto col-md-3 col-xl-2 px-sm-2 px-0 bg-dark">
            <div class="d-flex flex-column align-items-center align-items-sm-start px-3 pt-2 text-white min-vh-100">
                <a href="/note-boardgames/index.html" class="d-flex align-items-center pb-3 mb-md-0 me-md-auto text-white text-decoration-none">
                    <img src="https://sun9-63.userapi.com/s/v1/if1/_86rarat6d7LPOE5G6LfVegJuItSP73RjyPkwFpimEMdzEdshZG8VighmXowAFCf3YFTnvUY.jpg?size=100x100&quality=96&crop=20,20,503,503&ava=1"
                         alt="hugenerd" width="100" height="100" class="rounded-circle">

                    <span class="fs-5 d-none d-sm-inline">Бардовский университет</span>
                </a>
                <ul class="nav nav-pills flex-column mb-sm-auto mb-0 align-items-center align-items-sm-start" id="menu">
                    <li class="nav-item">
                        <a href="/note-boardgames/index.html" class="nav-link align-middle px-0">
                            <i class="fs-4 bi-house"></i> <span
                                class="ms-1 d-none d-sm-inline">Стартовая страница</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="/note-boardgames/calendar.html" class="nav-link align-middle px-0">
                            <i class="fs-4 bi-house"></i> <span
                                class="ms-1 d-none d-sm-inline">Календарь игр</span>
                        </a>
                    </li>
                    <li>
                        <a href="#submenu3" data-bs-toggle="collapse"
                           class="nav-link px-0 align-middle dropdown-toggle">
                            <i class="fs-4 bi-grid"></i> <span class="ms-1 d-none d-sm-inline">Теги</span> </a>
                        <ul class="collapse nav flex-column ms-1" id="submenu3" data-bs-parent="#menu">
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
        <div style="" id="contentSlider" class="col py-3">

        </div>
    </div>
</div>

<script>
    function resizeGridItem(item) {
        grid = document.getElementsByClassName("grid")[0];
        rowHeight = parseInt(window.getComputedStyle(grid).getPropertyValue('grid-auto-rows'));
        rowGap = parseInt(window.getComputedStyle(grid).getPropertyValue('grid-row-gap'));
        rowSpan = Math.ceil((item.querySelector('.content').getBoundingClientRect().height + rowGap) / (rowHeight + rowGap));
        item.style.gridRowEnd = "span " + rowSpan;
    }

    function resizeAllGridItems() {
        allItems = document.getElementsByClassName("item");
        for (x = 0; x < allItems.length; x++) {
            resizeGridItem(allItems[x]);
        }
    }

    function resizeInstance(instance) {
        item = instance.elements[0];
        resizeGridItem(item);
    }

    function copyToClipboard(id, el) {
        text = document.getElementById(id).href;
        navigator.clipboard.writeText(text).then(function () {
            alert("Ссылка скопированна в буффер");
        }, function (err) {
            console.error('Async: Could not copy text: ', err);
        });

    }


    window.onload = resizeAllGridItems();
    window.addEventListener("resize", resizeAllGridItems);

    allItems = document.getElementsByClassName("item");
    for (x = 0; x < allItems.length; x++) {
        imagesLoaded(allItems[x], resizeInstance);
    }
</script>

<script>
    var url_string = window.location.href;
    var url = new URL(url_string);
    var hash = url.searchParams.get("filter");

    var main = document.createElement("div");
    main.className = " grid";
    main.style = ''
    document.getElementById("contentSlider").appendChild(main);
    const setTags = new Set();

    notes.filter(n => hash === null || n.tags.includes(decodeURI(hash))).forEach(function (note) {

        var newElement2 = document.createElement('div');
        newElement2.id = 'm_' + note.id;

        files = "";
        for (var file in note.files) {
            files += '<div style="width:50%; padding: 10px; float: left;"><img width="90%" loading="lazy" src="' + note.files[file] + '"></div>';
        }

        tags = "";
        for (var tag in note.tags) {
            setTags.add(note.tags[tag]);
            tags += '<a href="?filter=' + encodeURIComponent(note.tags[tag]) + '" class="text-decoration-none font-weight-light" className="link-primary">' + note.tags[tag] + '</a><br>';
        }

        newElement2.innerHTML = "<div  class=\"modal fade\" id=\"exampleModal" + note.id + "\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n" +
            "    <div class=\"modal-dialog modal-lg\" role=\"document\">\n" +
            "        <div class=\"modal-content\">\n" +
            "            <div class=\"modal-header\">\n" +
            "                <h5 class=\"modal-title\" id=\"exampleModalLabel\">" + note.title + "</h5>\n" +
            "                <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\n" +
            "                    <span aria-hidden=\"true\">&times;</span>\n" +
            "                </button>\n" +
            "            </div>\n" +
            "            <div class=\"modal-body\">\n" + "<div  style=\"padding: 10px; float: left;\">" + note.content + "</div>" + "<div>" + files + "</div>" +
            "            </div>\n" +
            "            <div class=\"modal-footer\">\n" +
            '<a id="a_' + note.id + '" href="#data_' + note.id + '" hidden="hidden"></a>' +
            '<button type="button" class="btn btn-default btn-copy js-tooltip js-copy" data-toggle="tooltip" data-placement="bottom" data-copy="a_' + note.id + '">' +
            '  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-share" viewBox="0 0 16 16">\n' +
            '   <path d="M13.5 1a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zM11 2.5a2.5 2.5 0 1 1 .603 1.628l-6.718 3.12a2.499 2.499 0 0 1 0 1.504l6.718 3.12a2.5 2.5 0 1 1-.488.876l-6.718-3.12a2.5 2.5 0 1 1 0-3.256l6.718-3.12A2.5 2.5 0 0 1 11 2.5zm-8.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3zm11 5.5a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3z"/>\n' +
            '  </svg>' +
            '</button>' +
            tags +
            "            </div>\n" +
            "        </div>\n" +
            "    </div>\n" +
            "</div>";

        var imgs = "";
        note.files.forEach(function (item) {
            imgs += '<div style="margin:5px;height:110px; width:110px; display: block;float: left">' +
                '<img width="105px" height="105px" loading="lazy"  src="' + item + '">' +
                '</div>';

        });

        var newElement = document.createElement('div');
        newElement.id = note.id;
        newElement.className = "item";


        newElement.innerHTML = "<div class='content'><div id=\"data_" + note.id + "\" data-toggle=\"modal\" data-target=\"#exampleModal" + note.id + "\">" +
            "<p class=\"font-weight-bold\">" + note.title + "</p>" +
            "<hr><div style='height: 100%;Display: flex'><div style='float: left'>" + imgs + '</div>' +
            "</div>" +
            "<div class=\"font-weight-normal\" style='margin-top:10px;Display: flex'>" + note.content + "</div>" +
            '<hr><div>' + tags + '</div>' +
            "</div></div>";
        main.appendChild(newElement);
        resizeGridItem(newElement);


        document.body.appendChild(newElement2);

    });


    setTags.forEach(function (item) {
        var submenu = document.createElement("li");
        submenu.innerHTML = '<a href="?filter=' + encodeURIComponent(item) + '" class"nav-link px-0"> <span class=" text-decoration-none font-weight-light d-none d-sm-inline">' + item + '</a>';
        document.getElementById("submenu3").appendChild(submenu);
    });
</script>

<script>
    $(document).ready(function () {
        $('.js-tooltip').tooltip();

        // Copy to clipboard
        // Grab any text in the attribute 'data-copy' and pass it to the
        // copy function
        $('.js-copy').click(function () {
            var text = $(this).attr('data-copy');
            var el = $(this);
            copyToClipboard(text, el);
        });


        if (window.location.hash !== null) {
            document.getElementById(window.location.hash.replace('#', '')).click();
        }
    });
</script>
</body>
</html>
